        -:    0:Source:../hvm4/clang/wnf/app_red_mat_sup.c
        -:    0:Graph:hvm4-cov-main.gcno
        -:    0:Data:hvm4-cov-main.gcda
        -:    0:Runs:22
        -:    1:// ((f ~> λ{#K:h; m}) &L{a,b})
        -:    2:// --------------------------- APP-RED-MAT-SUP
        -:    3:// ! F &L = f
        -:    4:// ! H &L = h
        -:    5:// ! M &L = m
        -:    6:// &L{((F₀ ~> λ{#K:H₀; M₀}) a)
        -:    7://   ,((F₁ ~> λ{#K:H₁; M₁}) b)}
    #####:    8:fn Term wnf_app_red_mat_sup(Term f, Term mat, Term sup) {
    #####:    9:  ITRS++;
    #####:   10:  u32  mat_loc = term_val(mat);
    #####:   11:  u32  mat_nam = term_ext(mat);
    #####:   12:  u32  sup_loc = term_val(sup);
    #####:   13:  u32  lab     = term_ext(sup);
    #####:   14:  Term h       = heap_read(mat_loc + 0);
    #####:   15:  Term m       = heap_read(mat_loc + 1);
    #####:   16:  Term a       = heap_read(sup_loc + 0);
    #####:   17:  Term b       = heap_read(sup_loc + 1);
    #####:   18:  u64  base    = heap_alloc(17);
    #####:   19:  u32  at      = (u32)base;
    #####:   20:  heap_write(at + 0, f);
    #####:   21:  heap_write(at + 1, h);
    #####:   22:  heap_write(at + 2, m);
    #####:   23:  Copy F       = term_clone_at(at + 0, lab);
    #####:   24:  Copy H       = term_clone_at(at + 1, lab);
    #####:   25:  Copy M       = term_clone_at(at + 2, lab);
    #####:   26:  Term mat0    = term_new_mat_at(at + 3, mat_nam, H.k0, M.k0);
    #####:   27:  Term mat1    = term_new_mat_at(at + 5, mat_nam, H.k1, M.k1);
    #####:   28:  Term red0    = term_new_red_at(at + 7, F.k0, mat0);
    #####:   29:  Term red1    = term_new_red_at(at + 9, F.k1, mat1);
    #####:   30:  Term app0    = term_new_app_at(at + 11, red0, a);
    #####:   31:  Term app1    = term_new_app_at(at + 13, red1, b);
    #####:   32:  return term_new_sup_at(at + 15, lab, app0, app1);
        -:   33:}
