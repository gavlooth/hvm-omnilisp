        -:    0:Source:../hvm4/clang/heap/alloc.c
        -:    0:Graph:hvm4-cov-main.gcno
        -:    0:Data:hvm4-cov-main.gcda
        -:    0:Runs:22
     3889:    1:fn u64 heap_alloc(u64 size) {
     3889:    2:  u32 tid = wnf_tid();
     3889:    3:  u64 idx = (u64)tid * HEAP_STRIDE;
     3889:    4:  u64 at = HEAP_NEXT[idx];
     3889:    5:  u64 next = at + size;
     3889:    6:  if (__builtin_expect(next <= HEAP_END[idx] && next >= at, 1)) {
     3889:    7:    HEAP_NEXT[idx] = next;
     3889:    8:    return at;
        -:    9:  }
    #####:   10:  fprintf(stderr,
        -:   11:          "Out of heap memory in thread bank %u (need %llu words)\n",
        -:   12:          tid, size);
    #####:   13:  exit(1);
        -:   14:}
