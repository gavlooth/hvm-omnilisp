        -:    0:Source:../hvm4/clang/wnf/mov_nod.c
        -:    0:Graph:hvm4-cov-main.gcno
        -:    0:Data:hvm4-cov-main.gcda
        -:    0:Runs:22
        -:    1:// % X = T{a,b,...}
        -:    2:// ----------------- MOV-NOD
        -:    3:// % A = a
        -:    4:// % B = b
        -:    5:// ...
        -:    6:// X ‚Üê T{A,B,...}
    #####:    7:fn Term wnf_mov_nod(u32 loc, Term term) {
    #####:    8:  ITRS++;
    #####:    9:  u32 ari = term_arity(term);
    #####:   10:  if (ari == 0) {
    #####:   11:    heap_subst_var(loc, term);
    #####:   12:    return term;
        -:   13:  }
    #####:   14:  u32  t_loc = term_val(term);
    #####:   15:  u32  t_ext = term_ext(term);
    #####:   16:  u8   t_tag = term_tag(term);
    #####:   17:  u64  base  = heap_alloc(2 * (u64)ari);
    #####:   18:  u32  got_loc = (u32)base;
    #####:   19:  u32  nod_loc = got_loc + ari;
    #####:   20:  for (u32 i = 0; i < ari; i++) {
    #####:   21:    heap_write(got_loc + i, heap_read(t_loc + i));
    #####:   22:    heap_write(nod_loc + i, term_new_got(got_loc + i));
        -:   23:  }
    #####:   24:  Term res = term_new(0, t_tag, t_ext, nod_loc);
    #####:   25:  heap_subst_var(loc, res);
    #####:   26:  return res;
        -:   27:}
