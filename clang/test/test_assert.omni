;; test_assert.lisp - Tests for assertions

;; Assert checks condition
;; TEST: assert true passes
;; EXPECT: nil
(assert true)

;; TEST: assert expression
;; EXPECT: nil
(assert (= 2 (+ 1 1)))

;; TEST: assert with message
;; EXPECT: nil
(assert (> 5 3) "5 should be greater than 3")

;; TEST: assert fails
;; EXPECT: "assertion failed"
(handle
  (assert false)
  (AssertionError [msg resume] "assertion failed"))

;; TEST: assert fails with message
;; EXPECT: "custom message"
(handle
  (assert false "custom message")
  (AssertionError [msg resume] msg))

;; Assert-eq checks equality
;; TEST: assert-eq passes
;; EXPECT: nil
(assert-eq 42 42)

;; TEST: assert-eq strings
;; EXPECT: nil
(assert-eq "hello" "hello")

;; TEST: assert-eq lists
;; EXPECT: nil
(assert-eq '(1 2 3) '(1 2 3))

;; TEST: assert-eq fails
;; EXPECT: "not equal"
(handle
  (assert-eq 1 2)
  (AssertionError [msg resume] "not equal"))

;; Assert-not-eq
;; TEST: assert-not-eq passes
;; EXPECT: nil
(assert-not-eq 1 2)

;; TEST: assert-not-eq fails
;; EXPECT: "should not be equal"
(handle
  (assert-not-eq 1 1)
  (AssertionError [msg resume] "should not be equal"))

;; Assert-nil
;; TEST: assert-nil passes
;; EXPECT: nil
(assert-nil nil)

;; TEST: assert-nil fails
;; EXPECT: "expected nil"
(handle
  (assert-nil 42)
  (AssertionError [msg resume] "expected nil"))
