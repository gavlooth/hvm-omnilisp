;; test_where_constraint.omni - Tests for typed function parameters

;; OmniLisp uses {Type} syntax in slots for type annotations

;; TEST: basic typed function
(define add-nums [x {Int}] [y {Int}]
  (+ x y))

;; EXPECT: 15
(add-nums 7 8)

;; TEST: typed with string
(define greet [name {String}]
  (str-concat "Hello, " name))

;; EXPECT: "Hello, world"
(greet "world")

;; TEST: max value function
(define max-val [x] [y]
  (if (> x y) x y))

;; EXPECT: 10
(max-val 5 10)

;; TEST: max of equal values
;; EXPECT: 7
(max-val 7 7)

;; TEST: function composition
(define double [x] (* x 2))
(define inc [x] (+ x 1))

;; EXPECT: 8
(double (inc 3))

;; TEST: nested typed call
;; EXPECT: 22
(add-nums (max-val 10 5) (double 6))

;; TEST: identity function
(define id [x] x)

;; EXPECT: 42
(id 42)

;; EXPECT: true
(= (add-nums 20 22) 42)
