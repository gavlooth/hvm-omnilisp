;; test_range.lisp - Tests for range and range-step

;; Basic range (0 to n-1)
(define range [n]
  (let build [i 0] [acc '()]
    (if (>= i n)
      (reverse acc)
      (build (+ i 1) (cons i acc)))))

;; TEST: range 5
;; EXPECT: (0 1 2 3 4)
(range 5)

;; TEST: range 0
;; EXPECT: ()
(range 0)

;; TEST: range 1
;; EXPECT: (0)
(range 1)

;; Range with start and end
(define range-from [start] [end]
  (let build [i start] [acc '()]
    (if (>= i end)
      (reverse acc)
      (build (+ i 1) (cons i acc)))))

;; TEST: range-from 3 to 8
;; EXPECT: (3 4 5 6 7)
(range-from 3 8)

;; TEST: range-from same start/end
;; EXPECT: ()
(range-from 5 5)

;; Range with step
(define range-step [start] [end] [step]
  (let build [i start] [acc '()]
    (if (>= i end)
      (reverse acc)
      (build (+ i step) (cons i acc)))))

;; TEST: range-step by 2
;; EXPECT: (0 2 4 6 8)
(range-step 0 10 2)

;; TEST: range-step by 3
;; EXPECT: (0 3 6 9)
(range-step 0 10 3)

;; TEST: range-step from 1 by 2
;; EXPECT: (1 3 5 7 9)
(range-step 1 10 2)
