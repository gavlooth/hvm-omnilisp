;; test_dissoc.lisp - Tests for dissoc (remove key)

;; Dissoc removes a key from a dict
(define dissoc [d] [key]
  (dict-remove d key))

;; TEST: dissoc from dict
;; EXPECT: #{"a" 1}
(dissoc #{"a" 1 "b" 2} "b")

;; TEST: dissoc non-existent key
;; EXPECT: #{"a" 1 "b" 2}
(dissoc #{"a" 1 "b" 2} "z")

;; TEST: dissoc from empty dict
;; EXPECT: #{}
(dissoc #{} "key")

;; TEST: dissoc all keys
;; EXPECT: #{}
(dissoc (dissoc #{"a" 1 "b" 2} "a") "b")

;; TEST: dissoc with symbol keys
;; EXPECT: #{:x 1}
(dissoc #{:x 1 :y 2} :y)

;; Multiple dissoc helper
(define dissoc-keys [d] [keys]
  (match keys
    ()       d
    (k .. rest) (dissoc-keys (dissoc d k) rest)))

;; TEST: dissoc multiple keys
;; EXPECT: #{"c" 3}
(dissoc-keys #{"a" 1 "b" 2 "c" 3} '("a" "b"))

;; TEST: dissoc multiple with some missing
;; EXPECT: #{"a" 1}
(dissoc-keys #{"a" 1 "b" 2} '("b" "z" "w"))
