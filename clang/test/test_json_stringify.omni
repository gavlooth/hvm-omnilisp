;; test_json_stringify.omni - Tests for JSON stringification

;; Json-stringify converts value to JSON string
;; TEST: stringify nothing (null)
;; EXPECT: "null"
(json-stringify nothing)

;; TEST: stringify true
;; EXPECT: "true"
(json-stringify true)

;; TEST: stringify false
;; EXPECT: "false"
(json-stringify false)

;; TEST: stringify integer
;; EXPECT: "42"
(json-stringify 42)

;; TEST: stringify zero
;; EXPECT: "0"
(json-stringify 0)

;; TEST: stringify string
;; EXPECT: "\"hello\""
(json-stringify "hello")

;; TEST: stringify string with quotes
;; EXPECT: "\"hello\\\"world\""
(json-stringify "hello\"world")

;; TEST: stringify array
;; EXPECT: "[1,2,3]"
(json-stringify [1 2 3])

;; TEST: stringify list as array
;; EXPECT: "[1,2,3]"
(json-stringify '(1 2 3))

;; TEST: stringify empty array
;; EXPECT: "[]"
(json-stringify [])

;; TEST: stringify empty list
;; EXPECT: "[]"
(json-stringify '())

;; TEST: stringify nested arrays
;; EXPECT: "[[1,2],[3,4]]"
(json-stringify [[1 2] [3 4]])

;; TEST: stringify array with mixed types
;; EXPECT: "[1,true,\"hello\"]"
(json-stringify [1 true "hello"])

;; TEST: stringify dict as object
;; EXPECT: "{\"a\":1,\"b\":2}"
(json-stringify #{"a" 1 "b" 2})

;; TEST: stringify empty object
;; EXPECT: "{}"
(json-stringify #{})

;; TEST: stringify nested object
;; EXPECT: "{\"items\":[1,2,3]}"
(json-stringify #{"items" [1 2 3]})

;; Roundtrip tests
;; TEST: roundtrip number
;; EXPECT: 42
(json-parse (json-stringify 42))

;; TEST: roundtrip string
;; EXPECT: "test"
(json-parse (json-stringify "test"))

;; TEST: roundtrip array
;; EXPECT: '(1 2 3)
(json-parse (json-stringify [1 2 3]))

;; TEST: roundtrip true
;; EXPECT: true
(json-parse (json-stringify true))

;; TEST: roundtrip false
;; EXPECT: false
(json-parse (json-stringify false))

;; TEST: roundtrip null
;; EXPECT: nothing
(json-parse (json-stringify nothing))
