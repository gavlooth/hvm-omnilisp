;; test_dict_remove.lisp - Tests for dissoc (remove key from dict)
;; Note: "dissoc" is the built-in function; "dict-remove" is internal

;; Remove single key
;; TEST: remove existing key
;; EXPECT: #{:a 1 :c 3}
(dissoc #{:a 1 :b 2 :c 3} :b)

;; TEST: remove first key
;; EXPECT: #{:b 2 :c 3}
(dissoc #{:a 1 :b 2 :c 3} :a)

;; TEST: remove last key
;; EXPECT: #{:a 1 :b 2}
(dissoc #{:a 1 :b 2 :c 3} :c)

;; TEST: remove non-existent key (no change)
;; EXPECT: #{:a 1 :b 2}
(dissoc #{:a 1 :b 2} :z)

;; TEST: remove from empty dict
;; EXPECT: #{}
(dissoc #{} :a)

;; Remove to empty
;; TEST: remove all keys
;; EXPECT: #{}
(dissoc (dissoc (dissoc #{:a 1 :b 2 :c 3} :a) :b) :c)

;; Remove multiple keys helper using fold
(define dissoc-keys [d] [keys]
  (foldl (lambda [acc] [k] (dissoc acc k)) d keys))

;; TEST: remove multiple keys
;; EXPECT: #{:c 3}
(dissoc-keys #{:a 1 :b 2 :c 3} (list :a :b))
