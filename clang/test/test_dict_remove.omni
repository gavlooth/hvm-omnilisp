;; test_dict_remove.lisp - Tests for dict-remove (dissoc)

;; Remove single key
;; TEST: remove existing key
;; EXPECT: #{:a 1 :c 3}
(dict-remove #{:a 1 :b 2 :c 3} :b)

;; TEST: remove first key
;; EXPECT: #{:b 2 :c 3}
(dict-remove #{:a 1 :b 2 :c 3} :a)

;; TEST: remove last key
;; EXPECT: #{:a 1 :b 2}
(dict-remove #{:a 1 :b 2 :c 3} :c)

;; TEST: remove non-existent key (no change)
;; EXPECT: #{:a 1 :b 2}
(dict-remove #{:a 1 :b 2} :z)

;; TEST: remove from empty dict
;; EXPECT: #{}
(dict-remove #{} :a)

;; Remove to empty
;; TEST: remove all keys
;; EXPECT: #{}
(dict-remove (dict-remove (dict-remove #{:a 1 :b 2 :c 3} :a) :b) :c)

;; Dissoc is alias
;; TEST: dissoc
;; EXPECT: #{:a 1 :c 3}
(dissoc #{:a 1 :b 2 :c 3} :b)

;; Remove multiple keys
(define dict-remove-keys [d] [keys]
  (foldl (lambda [acc] [k] (dict-remove acc k)) d keys))

;; TEST: remove multiple keys
;; EXPECT: #{:c 3}
(dict-remove-keys #{:a 1 :b 2 :c 3} '(:a :b))
