;; test_array_length.lisp - Tests for array length

;; TEST: length of non-empty array
;; EXPECT: 5
(arr-len [1 2 3 4 5])

;; TEST: length of empty array
;; EXPECT: 0
(arr-len [])

;; TEST: length of single element
;; EXPECT: 1
(arr-len [42])

;; TEST: length of nested array (counts outer elements)
;; EXPECT: 3
(arr-len [[1 2] [3 4] [5 6]])

;; Use length in loop bounds
(define arr-sum [arr]
  (let loop [i 0] [acc 0]
    (if (< i (arr-len arr))
      (loop (+ i 1) (+ acc (arr-get arr i)))
      acc)))

;; TEST: sum array elements via loop
;; EXPECT: 15
(arr-sum [1 2 3 4 5])

;; TEST: sum empty array
;; EXPECT: 0
(arr-sum [])

;; Last index helper
(define arr-last-index [arr]
  (- (arr-len arr) 1))

;; TEST: last index of array
;; EXPECT: 4
(arr-last-index [1 2 3 4 5])

;; Get last element
(define arr-last [arr]
  (arr-get arr (arr-last-index arr)))

;; TEST: get last element
;; EXPECT: 50
(arr-last [10 20 30 40 50])
