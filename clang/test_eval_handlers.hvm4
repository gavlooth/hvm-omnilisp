// Test handler evaluation

@omni_eval_handlers = λ&menv. λ&hdlrs.
  λ{
    #NIL: #NIL
    #CON: λ&h. λ&t.
      (λ&evaluated_h. #CON{evaluated_h, @omni_eval_handlers(menv)(t)})(@omni_eval_one_handler(menv)(h))
  }(hdlrs)

@omni_eval_one_handler = λ&menv. λ&h.
  λ{
    #HDef: λ&tag. λ&fn_expr. #Hdlr{tag, fn_expr}
    _: λ&u_. h
  }(h)

@menv_empty = #MEnv{#NIL, #NIL, #Noth, 0}

// One handler
@handler_def = #HDef{7522834, 99}
@handler_list = #CON{@handler_def, #NIL}

@test_eval = @omni_eval_handlers(@menv_empty)(@handler_list)

@main = @test_eval
