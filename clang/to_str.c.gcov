        -:    0:Source:../hvm4/clang/nick/to_str.c
        -:    0:Graph:hvm4-cov-main.gcno
        -:    0:Data:hvm4-cov-main.gcda
        -:    0:Runs:22
    #####:    1:fn void nick_to_str(u32 name, char *buf, u32 buf_size) {
        -:    2:  // Extract 4 characters from the 24-bit name (6 bits each)
        -:    3:  // Names are stored most significant first
        -:    4:  char tmp[5];
    #####:    5:  int len = 0;
    #####:    6:  for (int i = 3; i >= 0; i--) {
    #####:    7:    int b64 = (name >> (i * 6)) & 0x3F;
    #####:    8:    if (b64 != 0 || len > 0) {  // Skip leading underscores (zeros)
    #####:    9:      tmp[len++] = nick_b64_to_letter(b64);
        -:   10:    }
        -:   11:  }
    #####:   12:  if (len == 0) {
    #####:   13:    tmp[len++] = '_';  // Empty name becomes single underscore
        -:   14:  }
    #####:   15:  tmp[len] = '\0';
        -:   16:  // Copy to output buffer
    #####:   17:  for (int i = 0; i < len && i < (int)buf_size - 1; i++) {
    #####:   18:    buf[i] = tmp[i];
        -:   19:  }
    #####:   20:  buf[len < (int)buf_size - 1 ? len : buf_size - 1] = '\0';
    #####:   21:}
